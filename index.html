<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>order on gamesplanet</title>
<meta name="description" content="Buy FMCB/FunTuna, USB-only, FMCB+USB Combo & more. One-tap prefill. Prices from CSV."/>
<style>
:root{
  --bg:#0b1020; --card:#121a33; --muted:#9fb0d3; --text:#eaf1ff;
  --accent:#7c4dff; --accent2:#3ddc84; --accent3:#ffd54f;
  --chip:#1b2447; --ring: rgba(124,77,255,.35); --ring2: rgba(61,220,132,.35);
  --shadow:0 10px 30px rgba(0,0,0,.35);
}
@media(prefers-color-scheme:light){:root{--bg:#f7f8ff;--card:#ffffff;--text:#0b1020;--muted:#51607e;--chip:#eef2ff;--shadow:0 8px 20px rgba(11,16,32,.08)}}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:
    radial-gradient(60vw 60vw at 10% -10%, rgba(124,77,255,.20), transparent 40%),
    radial-gradient(50vw 50vw at 110% 10%, rgba(61,220,132,.20), transparent 40%),
    var(--bg);
  color:var(--text)
}
.wrap{max-width:1100px;margin:0 auto;padding:28px 18px 80px}
.brand{display:flex;align-items:center;gap:12px;margin-bottom:8px}
.logo{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;font-weight:900;background:linear-gradient(135deg,var(--accent),#5ecbff);color:#fff;box-shadow:var(--shadow)}
h1{font-size:clamp(22px,3.5vw,34px);margin:0}
.sub{color:var(--muted);margin:6px 0 22px}

.linkbtn{display:inline-flex;align-items:center;gap:8px;border:1.5px solid rgba(255,255,255,.12);padding:9px 12px;border-radius:12px;color:var(--text);text-decoration:none;font-weight:700}
.linkbtn:hover{box-shadow:0 0 0 6px var(--ring2)}

.grid{display:flex;flex-direction:column;gap:18px}
.card{background:var(--card);border-radius:20px;padding:18px;box-shadow:var(--shadow);position:relative;overflow:hidden}
.card:after{content:"";position:absolute;inset:auto -30% -30% auto;width:220px;height:220px;background:radial-gradient(90px 90px at 70% 30%, var(--ring), transparent 60%);pointer-events:none}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;background:var(--chip);color:var(--muted);border-radius:999px;font-size:12px;font-weight:700;margin-right:6px}
.title{margin:10px 0 6px;font-size:20px}
.muted{color:var(--muted);font-size:14px}

.variants{margin-top:14px;display:grid;gap:10px}
.row{display:grid;grid-template-columns:1.2fr 1.6fr;gap:8px;align-items:center;position:relative}
.name{font-weight:700}
.pill{display:inline-flex;align-items:center;gap:6px;background:var(--chip);padding:6px 10px;border-radius:999px;font-weight:800;font-size:12px}
.cta{display:flex;gap:8px;position:relative;z-index:1;flex-wrap:wrap}
.btn{border:0;padding:9px 12px;border-radius:12px;font-weight:800;cursor:pointer}
.btn.buy{background:var(--accent2);color:#08210f}
.btn.alt{background:var(--accent3);color:#241a00}
.btn[disabled]{opacity:.55;cursor:not-allowed}

.section{margin-top:28px}
.list{margin:10px 0 0 0;padding-left:18px}
.foot{opacity:.85;margin-top:34px;font-size:12px;color:var(--muted)}
.small{font-size:12px;color:var(--muted)}
hr.sep{border:none;border-top:1px dashed rgba(255,255,255,.12);margin:18px 0}
</style>
</head>
<body>
<div class="wrap">
  <div class="brand">
    <div class="logo">GPZ</div>
    <div>
      <h1>order on gamesplanet</h1>
      <div class="sub">One-tap Prefill Order ‚Ä¢ Prices from catalog.csv ‚Ä¢ Auto light/dark</div>
    </div>
  </div>

  <div class="controls" style="display:flex;flex-wrap:wrap;gap:10px;margin-bottom:18px">
    <a class="linkbtn" href="https://gamesplanet13.github.io/ps2gameselector/" target="_blank" rel="noopener">üü® Optional Games Selector</a>
    <a class="linkbtn" href="https://youtu.be/xGR0vUM1-Jw" target="_blank" rel="noopener">üéûÔ∏è Top Games List (Video)</a>
    <a class="linkbtn" href="https://youtu.be/bpGm0IAeyek" target="_blank" rel="noopener">üß© Setup Guide</a>
  </div>

  <div class="grid">
    <!-- 1) FMCB / FunTuna Card (CSV-driven) -->
    <section class="card" aria-labelledby="fmcb-title">
      <span class="badge">FMCB / FunTuna Card</span>
      <h2 class="title" id="fmcb-title">Memory Card for PS2 (Model-wise)</h2>
      <div class="muted">Boot PS2 games from USB using preconfigured FMCB / FunTuna + OPL. Choose your model:</div>
      <div class="variants" id="fmcbCard"></div>
    </section>

    <!-- 2) USB Only (CSV: Top & Optional) -->
    <section class="card" aria-labelledby="usb-title">
      <span class="badge">USB Only</span>
      <h2 class="title" id="usb-title">USB for PlayStation 2 ‚Äî Game-Loaded</h2>
      <div class="muted">Requires FMCB card + latest OPL. Plug directly into PS2 (no hub/splitter).</div>
      <div class="variants" id="usbList"></div>
    </section>

    <!-- 3) FMCB + USB Combo (CSV: Top & Optional) -->
    <section class="card" aria-labelledby="combo-title">
      <span class="badge">Combo Best Value</span>
      <h2 class="title" id="combo-title">FMCB + USB Combo for PS2</h2>
      <div class="muted">Fully Plug & Play. Works on PS2 Fat, Slim 7xxxx (FMCB) & Slim 9xxxx (FunTuna).</div>
      <div class="variants" id="comboList"></div>
    </section>

    <!-- 4) More Products (CSV-driven) -->
    <section class="card" aria-labelledby="more-title">
      <span class="badge">More Products</span>
      <h2 class="title" id="more-title">Retro Consoles, Handhelds & Controllers (CSV Prices)</h2>
      <div class="muted">Update <b>catalog.csv</b> to control prices. Missing price ‚Üí button disabled.</div>
      <div class="variants" id="moreProducts"></div>
      <div class="small" id="csvStatus"></div>
    </section>
  </div>

  <!-- Important notes -->
  <div class="section">
    <h3>‚ö†Ô∏è Important Notes</h3>
    <ul class="list">
      <li>Do <b>not</b> delete FMCB / OPL / ELF / system (blue icon) files.</li>
      <li>USB works with PS2 Fat & Slim (7xxxx / 9xxxx). Plug directly into PS2 (no hub/splitter).</li>
      <li>For Slim 9xxxx, <b>FunTuna</b> is used automatically with the combo.</li>
    </ul>
  </div>

  <div class="section">
    <h3>‚ö†Ô∏è Chip Condition (Read Before Order)</h3>
    <ul class="list">
      <li>üü¢ FMCB & FunTuna both work without any modding chip.</li>
      <li>üü¢ If your PS2 has <b>Matrix</b> or <b>Sumo Lite</b> chip ‚Üí usually OK.</li>
      <li>üî¥ If your PS2 has a <b>DVD Boot Chip</b> ‚Üí 99% chances FMCB/FunTuna will not work.</li>
      <li>üëâ In that case, chip wires must be disconnected (requires opening PS2). Message us for the step-by-step guidance video.</li>
    </ul>
  </div>

  <div class="section">
    <h3>üí° Warranty</h3>
    <ul class="list">
      <li>64GB / 128GB / 128GB SSD ‚Äì 1 Year</li>
      <li>256GB / 500GB SSD ‚Äì 1 Year</li>
      <li>500GB HDD ‚Äì 6 Months</li>
      <li>USB Enclosure ‚Äì ‚ùå No Warranty</li>
    </ul>
  </div>

  <div class="section">
    <h3>üìå Policy (Returns, Replacement & Refund)</h3>
    <ul class="list">
      <li>‚ùå <b>No Return</b> ‚Ä¢ ‚ùå <b>No Replacement</b> ‚Ä¢ ‚ùå <b>No Refund</b> on digital/game-loaded media & memory cards.</li>
      <li>‚úîÔ∏è Confirm OPL compatibility before ordering. Incorrect deletion of FMCB/ELF/system files voids support.</li>
      <li>üõ†Ô∏è 1 Month Free Software Reinstallation (Courier both sides by customer).</li>
      <li>‚ö†Ô∏è Physical/liquid damage or unauthorized modification not covered.</li>
    </ul>
  </div>

  <p class="foot">¬© Games Planet ‚Äî WhatsApp: +91 79836 24797 ‚Ä¢ This page opens the Prefill Order page with selected product. Prices in INR.</p>
</div>

<script>
/* ===================== Helpers & CSV loader ===================== */
const priceRows = []; // raw rows for fallback scanning
const priceMap  = new Map(); // normalized key -> price

const fmt = n => "‚Çπ"+Number(n).toLocaleString("en-IN");
const norm = s => (s||"")
  .toLowerCase()
  .replace(/[‚Äì‚Äî]/g,"-")       // en/em dash ‚Üí hyphen
  .replace(/\s+/g," ")        // collapse spaces
  .replace(/\s*-\s*/g,"-")    // trim around hyphens
  .trim();

const keyFor = (p,v) => `${norm(p)}|||${norm(v)}`;

/* Try several ways to find a price for (product, variant) */
function getPrice(product, variant){
  const p=norm(product), v=norm(variant);

  // 1) direct match
  const k1 = keyFor(product, variant);
  if(priceMap.has(k1)) return Number(priceMap.get(k1));

  // 2) sometimes CSV wrote product+variant together in 'product' column; search rows
  const wantCombined = norm(`${product} ${variant}`);
  for(const r of priceRows){
    const prod = norm(r.product);
    const vari = norm(r.variant||"");
    const comb1 = norm(`${r.product} ${r.variant||""}`);
    const comb2 = norm(`${r.product}, ${r.variant||""}`);
    if ((prod===p && vari===v) || comb1===wantCombined || comb2===wantCombined){
      return Number(r.price);
    }
  }

  // 3) USB/Combo variants: accept slight differences like "64gb pd ‚Äî top" vs "64gb pd top"
  for(const r of priceRows){
    const prod = norm(r.product);
    const vari = norm((r.variant||"").replace(/\s*‚Äî\s*/g," ").replace(/-/g," "));
    const wantV = v.replace(/\s*‚Äî\s*/g," ").replace(/-/g," ");
    if (prod===p && vari===wantV) return Number(r.price);
  }

  // not found
  return null;
}

/* parse CSV text into rows [{product,variant,price}] and fill priceMap */
function ingestCSV(txt){
  const lines = txt.split(/\r?\n/).filter(l=>l.trim().length>0);
  if(!lines.length) return;
  const header = lines.shift();
  const cols = header.split(",").map(s=>s.trim().toLowerCase());
  const pi=cols.indexOf("product"), vi=cols.indexOf("variant"), pri=cols.indexOf("price");
  if(pi<0 || vi<0 || pri<0){
    console.warn("CSV needs headers: product,variant,price");
    return;
  }
  lines.forEach(line=>{
    const parts = line.split(","); // simple split (no quotes expected)
    if(parts.length < Math.max(pi,vi,pri)+1) return;
    const product = (parts[pi]||"").trim();
    const variant = (parts[vi]||"").trim();
    const price   = Number((parts[pri]||"").trim());
    if(!product || isNaN(price)) return;

    priceRows.push({product,variant,price});
    const k = keyFor(product,variant||"");
    priceMap.set(k, price);
    // also store combined key to be tolerant
    const k2 = keyFor(product+" "+(variant||""), "");
    priceMap.set(k2, price);
  });
}

/* load CSV then render */
function loadCSV(){
  const statusEl=document.getElementById('csvStatus');
  fetch('catalog.csv')
    .then(r=>{ if(!r.ok) throw new Error('catalog.csv not found'); return r.text(); })
    .then(txt=>{
      ingestCSV(txt);
      statusEl.textContent='catalog.csv loaded';
      renderAll();
    })
    .catch(e=>{
      statusEl.textContent='catalog.csv not found or invalid ‚Äî add/update CSV to enable prices.';
      renderAll(); // still render, buttons disabled
    });
}

/* ===================== Section definitions ===================== */

/* FMCB / FunTuna models ‚Äî prices expected in CSV:
   Memory Card,PS2 Fat (All Models) ‚Äî FMCB,999
   Memory Card,PS2 Slim 7xxxx (All) ‚Äî FMCB,999
   Memory Card,PS2 Slim 9xxxx (All) ‚Äî FunTuna,999
*/
const FMCB_PRODUCT = 'Memory Card';
const fmcbModels = [
  'PS2 Fat (All Models) ‚Äî FMCB',
  'PS2 Slim 7xxxx (All) ‚Äî FMCB',
  'PS2 Slim 9xxxx (All) ‚Äî FunTuna',
];

/* USB ‚Äî prices in CSV as:
   USB for PS2 (Game-Loaded),64GB PD ‚Äî Top,999
   USB for PS2 (Game-Loaded),64GB PD ‚Äî Optional,1099
   ...
*/
const USB_PRODUCT='USB for PS2 (Game-Loaded)';
const usbVariants=['64GB PD','128GB PD','128GB SSD','256GB SSD','500GB HDD','500GB SSD'];

/* Combo ‚Äî prices in CSV as:
   FMCB + USB Combo for PS2,64GB PD ‚Äî Top,1499
   FMCB + USB Combo for PS2,64GB PD ‚Äî Optional,1649
   ...
*/
const COMBO_PRODUCT='FMCB + USB Combo for PS2';
const comboVariants=[
  {v:'64GB PD',count:21},{v:'128GB PD',count:41},{v:'128GB SSD',count:41},
  {v:'256GB SSD',count:71},{v:'500GB HDD',count:175},{v:'500GB SSD',count:175}
];

/* More products ‚Äî variants listed; prices purely from CSV (product,variant,price) */
const productDefs = [
  { name:'Gamestick Lite Pandora Mini M8', variants:['64GB'] },
  { name:'Gamestick Pro Pandora Pro M15', variants:['64GB'] },
  { name:'Gamestick GD10 vayava', variants:['64GB','128GB'] },
  { name:'Gamestick M33 vayava', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick M22 vayava', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick M55', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick M66', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick GS5 Mini', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick GD30v2 vayava', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick GD30v3 vayava', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick GD35 vayava', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick GD35 GTA Sanandreas Edition vayava', variants:['64GB','128GB','256GB'] },
  { name:'Gamestick M88', variants:['64GB','128GB','256GB'] },
  { name:'Gamebox Plus G10 Vayava', variants:['64GB','128GB'] },
  { name:'Gamebox Plus G10 Ultimate Edition Vayava', variants:['64GB','128GB'] },
  { name:'Gamebox G11Pro Vayava', variants:['64GB','128GB','256GB'] },
  { name:'Gamebox G11Pro Special Edition Vayava', variants:['64GB','128GB','256GB'] },
  { name:'Gamebox G11Pro Ultimate Edition Vayava', variants:['64GB','128GB','256GB'] },
  { name:'R35S', variants:['64GB'] },
  { name:'R36S', variants:['64GB'] },
  { name:'R36 ULTRA', variants:['64GB'] },
  { name:'SUP X7M', variants:['SINGLE','DUAL'] },
  { name:'BLACK HAWK', variants:['SINGLE'] },
  { name:'BLACK GAMEPAD CONTROLLER WIRELESS FOR PS4 COMPATIBLE', variants:['STD'] },
  { name:'P5 GAMEPAD CONTROLLER WIRELESS FOR PS4 COMPATIBLE', variants:['STD'] },
  { name:'P5 SPIDER MAN THEME CONTROLLER WIRELESS FOR PS4 COMPATIBLE', variants:['STD'] },
  { name:'BLACK WIRE CONTROLLER FOR PS2 COMPATIBLE', variants:['STD'] },
  { name:'WIRELESS CONTROLLER FOR PS2 COMPATIBLE', variants:['STD'] },
  { name:'BLACK WIRELESS CONTROLLER FOR PS3 COMPATIBLE', variants:['STD'] },
  { name:'PS2 SLIM', variants:['64GB','128GB','256GB','500GB'] },
  { name:'PS3 SUPERSLIM', variants:['500GB'] },
  { name:'PS3 SLIM', variants:['500GB'] },
  { name:'XBOX 360', variants:['500GB'] },
  { name:'PS4 FAT', variants:['500GB','1TB'] },
  { name:'PS4 SLIM', variants:['500GB','1TB'] },
  { name:'PS4 PRO', variants:['1TB','2TB'] },
];

/* ===================== Renderers ===================== */
function goPrefill(product,variant,base,pack){
  const q=new URLSearchParams({product,variant,base,pack});
  location.href=`order-prefill.html?${q}`;
}

function renderFMCB(){
  const box=document.getElementById('fmcbCard'); box.innerHTML='';
  fmcbModels.forEach(label=>{
    const price=getPrice(FMCB_PRODUCT,label);
    const row=document.createElement('div'); row.className='row';
    row.innerHTML=`<div class="name">${label}</div>`;
    const cta=document.createElement('div'); cta.className='cta';
    const b=document.createElement('button'); b.className='btn buy';
    if(price!=null){ b.textContent=`${fmt(price)}`; b.onclick=()=>goPrefill(FMCB_PRODUCT,label,price,'Card Only'); }
    else { b.textContent='Set price in CSV'; b.disabled=true; }
    cta.appendChild(b); row.appendChild(cta); box.appendChild(row);
  });
}

function renderUSB(){
  const box=document.getElementById('usbList'); box.innerHTML='';
  usbVariants.forEach(v=>{
    const pTop=getPrice(USB_PRODUCT,`${v} ‚Äî Top`) ?? getPrice(USB_PRODUCT,`${v}-Top`) ?? getPrice(USB_PRODUCT,`${v} Top`);
    const pOpt=getPrice(USB_PRODUCT,`${v} ‚Äî Optional`) ?? getPrice(USB_PRODUCT,`${v}-Optional`) ?? getPrice(USB_PRODUCT,`${v} Optional`);
    const row=document.createElement('div'); row.className='row';
    row.innerHTML=`<div class="name">${v}</div>`;
    const cta=document.createElement('div'); cta.className='cta';
    const b1=document.createElement('button'); b1.className='btn buy';
    if(pTop!=null){ b1.textContent=`Top ‚Ä¢ ${fmt(pTop)}`; b1.onclick=()=>goPrefill(USB_PRODUCT,v,pTop,'Top'); }
    else{ b1.textContent='Top ‚Ä¢ Set price'; b1.disabled=true; }
    const b2=document.createElement('button'); b2.className='btn alt';
    if(pOpt!=null){ b2.textContent=`Optional ‚Ä¢ ${fmt(pOpt)}`; b2.onclick=()=>goPrefill(USB_PRODUCT,`${v} ‚Äî Optional`,pOpt,'Optional'); }
    else{ b2.textContent='Optional ‚Ä¢ Set price'; b2.disabled=true; }
    cta.appendChild(b1); cta.appendChild(b2); row.appendChild(cta); box.appendChild(row);
  });
}

function renderCombo(){
  const box=document.getElementById('comboList'); box.innerHTML='';
  comboVariants.forEach(({v,count})=>{
    const pTop=getPrice(COMBO_PRODUCT,`${v} ‚Äî Top`) ?? getPrice(COMBO_PRODUCT,`${v}-Top`) ?? getPrice(COMBO_PRODUCT,`${v} Top`);
    const pOpt=getPrice(COMBO_PRODUCT,`${v} ‚Äî Optional`) ?? getPrice(COMBO_PRODUCT,`${v}-Optional`) ?? getPrice(COMBO_PRODUCT,`${v} Optional`);
    const row=document.createElement('div'); row.className='row';
    row.innerHTML=`<div class="name">${v} <span class="pill">üéÆ Top ${count}</span></div>`;
    const cta=document.createElement('div'); cta.className='cta';
    const b1=document.createElement('button'); b1.className='btn buy';
    if(pTop!=null){ b1.textContent=`Top ‚Ä¢ ${fmt(pTop)}`; b1.onclick=()=>goPrefill(COMBO_PRODUCT,v,pTop,'Top'); }
    else{ b1.textContent='Top ‚Ä¢ Set price'; b1.disabled=true; }
    const b2=document.createElement('button'); b2.className='btn alt';
    if(pOpt!=null){ b2.textContent=`Optional ‚Ä¢ ${fmt(pOpt)}`; b2.onclick=()=>goPrefill(COMBO_PRODUCT,`${v} ‚Äî Optional`,pOpt,'Optional'); }
    else{ b2.textContent='Optional ‚Ä¢ Set price'; b2.disabled=true; }
    cta.appendChild(b1); cta.appendChild(b2); row.appendChild(cta); box.appendChild(row);
  });
}

function renderMore(){
  const box=document.getElementById('moreProducts'); box.innerHTML='';
  productDefs.forEach(prod=>{
    const head=document.createElement('div'); head.className='row';
    head.innerHTML=`<div class="name">${prod.name}</div><div class="cta"></div>`;
    box.appendChild(head);

    const varRow=document.createElement('div'); varRow.className='row';
    varRow.innerHTML=`<div class="name small">Variants</div>`;
    const cta=document.createElement('div'); cta.className='cta';

    prod.variants.forEach(variant=>{
      const price = getPrice(prod.name, variant)
        ?? getPrice(`${prod.name} ${variant}`, "")   // CSV written combined
        ?? getPrice(prod.name, variant.replace(/\s/g,'')); // minor spacing differences

      const b=document.createElement('button');
      b.className='btn buy';
      if(price!=null){ b.textContent=`${variant} ‚Ä¢ ${fmt(price)}`; b.onclick=()=>goPrefill(prod.name,variant,price,'Top'); }
      else { b.textContent=`${variant} ‚Ä¢ Set price`; b.disabled=true; }
      cta.appendChild(b);
    });

    varRow.appendChild(cta);
    box.appendChild(varRow);
    const hr=document.createElement('hr'); hr.className='sep'; box.appendChild(hr);
  });
}

function renderAll(){ renderFMCB(); renderUSB(); renderCombo(); renderMore(); }

/* ===================== Start ===================== */
loadCSV();
</script>
</body>
</html>
